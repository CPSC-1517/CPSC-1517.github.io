<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lesson Plan: Day 1 | CPSC-1517 Student Notes</title>
    <meta name="description" content="Introduction to Application Development">
    
    
    <link rel="preload" href="/assets/css/0.styles.80f4b4fc.css" as="style"><link rel="preload" href="/assets/js/app.18ca0063.js" as="script"><link rel="preload" href="/assets/js/80.91bb7e9e.js" as="script"><link rel="prefetch" href="/assets/js/15.68dc8e9d.js"><link rel="prefetch" href="/assets/js/1.9613adf6.js"><link rel="prefetch" href="/assets/js/2.9378c4ec.js"><link rel="prefetch" href="/assets/js/3.971e86a2.js"><link rel="prefetch" href="/assets/js/4.f6208d11.js"><link rel="prefetch" href="/assets/js/5.5af9712a.js"><link rel="prefetch" href="/assets/js/6.43cc925b.js"><link rel="prefetch" href="/assets/js/7.23ab461f.js"><link rel="prefetch" href="/assets/js/8.f5420ce6.js"><link rel="prefetch" href="/assets/js/9.57aecd33.js"><link rel="prefetch" href="/assets/js/10.ec6ae9c3.js"><link rel="prefetch" href="/assets/js/11.f57f4b4c.js"><link rel="prefetch" href="/assets/js/12.b1eb4f61.js"><link rel="prefetch" href="/assets/js/13.3aa1d2e6.js"><link rel="prefetch" href="/assets/js/14.e130c5b8.js"><link rel="prefetch" href="/assets/js/16.65ca882c.js"><link rel="prefetch" href="/assets/js/17.295eeab3.js"><link rel="prefetch" href="/assets/js/18.db61e7e8.js"><link rel="prefetch" href="/assets/js/19.2ea1010b.js"><link rel="prefetch" href="/assets/js/20.f4159ad9.js"><link rel="prefetch" href="/assets/js/21.b6c17dd6.js"><link rel="prefetch" href="/assets/js/22.9919b407.js"><link rel="prefetch" href="/assets/js/23.b0bbc267.js"><link rel="prefetch" href="/assets/js/24.046a81c3.js"><link rel="prefetch" href="/assets/js/25.6a9003d0.js"><link rel="prefetch" href="/assets/js/26.b6d3cee7.js"><link rel="prefetch" href="/assets/js/27.97f57c46.js"><link rel="prefetch" href="/assets/js/28.c6e59545.js"><link rel="prefetch" href="/assets/js/29.809ebd4f.js"><link rel="prefetch" href="/assets/js/30.dc025023.js"><link rel="prefetch" href="/assets/js/31.69b7baf3.js"><link rel="prefetch" href="/assets/js/32.3260e839.js"><link rel="prefetch" href="/assets/js/33.59ca40ec.js"><link rel="prefetch" href="/assets/js/34.869ffff0.js"><link rel="prefetch" href="/assets/js/35.caa30fd0.js"><link rel="prefetch" href="/assets/js/36.ff53776b.js"><link rel="prefetch" href="/assets/js/37.82ced42f.js"><link rel="prefetch" href="/assets/js/38.df0ba7ba.js"><link rel="prefetch" href="/assets/js/39.86af542f.js"><link rel="prefetch" href="/assets/js/40.f32adf72.js"><link rel="prefetch" href="/assets/js/41.d579ee77.js"><link rel="prefetch" href="/assets/js/42.783ab02b.js"><link rel="prefetch" href="/assets/js/43.437cfda1.js"><link rel="prefetch" href="/assets/js/44.6ac4edc2.js"><link rel="prefetch" href="/assets/js/45.f1db196f.js"><link rel="prefetch" href="/assets/js/46.9465cc30.js"><link rel="prefetch" href="/assets/js/47.1c476926.js"><link rel="prefetch" href="/assets/js/48.c21960ec.js"><link rel="prefetch" href="/assets/js/49.d87eda7a.js"><link rel="prefetch" href="/assets/js/50.017f75e8.js"><link rel="prefetch" href="/assets/js/51.4315db19.js"><link rel="prefetch" href="/assets/js/52.c4508db7.js"><link rel="prefetch" href="/assets/js/53.80132b99.js"><link rel="prefetch" href="/assets/js/54.c08ed4bd.js"><link rel="prefetch" href="/assets/js/55.a92ccd93.js"><link rel="prefetch" href="/assets/js/56.9e0d7bca.js"><link rel="prefetch" href="/assets/js/57.e5b7372e.js"><link rel="prefetch" href="/assets/js/58.6b02135a.js"><link rel="prefetch" href="/assets/js/59.6400a0a4.js"><link rel="prefetch" href="/assets/js/60.dbb6edbb.js"><link rel="prefetch" href="/assets/js/61.7754624d.js"><link rel="prefetch" href="/assets/js/62.3cea0c67.js"><link rel="prefetch" href="/assets/js/63.481ce7d1.js"><link rel="prefetch" href="/assets/js/64.7e17d71d.js"><link rel="prefetch" href="/assets/js/65.efe4bee6.js"><link rel="prefetch" href="/assets/js/66.2f2c0486.js"><link rel="prefetch" href="/assets/js/67.b0f157e1.js"><link rel="prefetch" href="/assets/js/68.f1628f2f.js"><link rel="prefetch" href="/assets/js/69.002b01fc.js"><link rel="prefetch" href="/assets/js/70.cf8495d1.js"><link rel="prefetch" href="/assets/js/71.7c6eceaa.js"><link rel="prefetch" href="/assets/js/72.3939ffad.js"><link rel="prefetch" href="/assets/js/73.ecfc97a3.js"><link rel="prefetch" href="/assets/js/74.d910aa50.js"><link rel="prefetch" href="/assets/js/75.b8972ba7.js"><link rel="prefetch" href="/assets/js/76.8b7f61ba.js"><link rel="prefetch" href="/assets/js/77.39c2e61c.js"><link rel="prefetch" href="/assets/js/78.f07ab13f.js"><link rel="prefetch" href="/assets/js/79.99522ab3.js"><link rel="prefetch" href="/assets/js/81.64e3f368.js"><link rel="prefetch" href="/assets/js/82.30b15df6.js"><link rel="prefetch" href="/assets/js/83.b785f80f.js"><link rel="prefetch" href="/assets/js/84.9d3042a6.js"><link rel="prefetch" href="/assets/js/85.d20b6dc7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.80f4b4fc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      CPSC-1517 Student Notes
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">Home</a></div><div class="nav-item"><a href="/logs/" class="nav-link">LOGs</a></div><div class="nav-item"><a href="/csharp/" class="nav-link">C-Sharp</a></div><div class="nav-item"><a href="/html/" class="nav-link">Html</a></div><div class="nav-item"><a href="/razor/" class="nav-link">Razor</a></div><div class="nav-item"><a href="/clientserver/" class="nav-link">Client-Server</a></div><div class="nav-item"><a href="/webforms/" class="nav-link">Webforms</a></div><div class="nav-item"><a href="https://cpsc-1517.github.io/LabSpecs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lab Specs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/CPSC-1517/CPSC-1517.github.io/issues/new" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Issues/Bugs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://moodle.nait.ca" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Moodle
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">Home</a></div><div class="nav-item"><a href="/logs/" class="nav-link">LOGs</a></div><div class="nav-item"><a href="/csharp/" class="nav-link">C-Sharp</a></div><div class="nav-item"><a href="/html/" class="nav-link">Html</a></div><div class="nav-item"><a href="/razor/" class="nav-link">Razor</a></div><div class="nav-item"><a href="/clientserver/" class="nav-link">Client-Server</a></div><div class="nav-item"><a href="/webforms/" class="nav-link">Webforms</a></div><div class="nav-item"><a href="https://cpsc-1517.github.io/LabSpecs/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Lab Specs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/CPSC-1517/CPSC-1517.github.io/issues/new" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Issues/Bugs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://moodle.nait.ca" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Moodle
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav><ul class="sidebar-links"><li><a href="/Instructor/" class="sidebar-link">Lesson Plan Overview</a></li></ul></div><div class="page"><div class="content"><p><strong>Objectives:</strong></p><p><strong>Discuss:</strong></p><blockquote><p>What is Business Logic Layer?</p></blockquote><blockquote><p>Client Server Architecture (logical n-tiered): All table records.</p></blockquote><blockquote><p>Client Server Architecture (logical n-tiered): Single record query.</p></blockquote><p><strong>Code:</strong></p><blockquote><p>Review web.sitemap (set up for demonstrations).</p></blockquote><blockquote><p>BLL: List all query</p></blockquote><blockquote><p>BLL: Single record query via primary key.</p></blockquote><p><strong>Resources: Student</strong></p><p>Moodle site.</p><p>URL Student Notes</p><p>Client Server Architecture</p><p><strong>Resources: Instructor</strong></p><p>Lesson 1: Introduction to using EnityFramework for database access.</p><p><strong>Concepts:</strong></p><ol><li><p>Quick review EntityFramework: entity definition, context class,<br>
entityframework</p></li><li><p>BLL controller classes:</p><ul><li><p>Where does they “sit” in our logical Client Server Architecture.</p></li><li><p>What can you do in your class</p></li></ul></li><li><p>Queries using EntityFramework</p><ul><li><p>List All table records</p></li><li><p>Primary Key query</p></li></ul></li></ol><p><strong>EntityFramework: Data Access</strong></p><p>When ASP.Net first started, users used ADO.Net to access the database. This<br>
required mounts of work, redundant setup work. As time went on, as usual, 3rd<br>
party individuals attempted to reduce the amount of work needed to access the<br>
database using ADO.Net. One popular library was Enterprise Library. This reduce<br>
the redundant tedious work of using ADO.net directly. In about 2008, Microsoft<br>
introduce EntityFramework to assist developers with database access. ADO.Net was<br>
even further removed from developer (hidden). EntityFramework is a set of<br>
classes that manage your database access. One links into EntityFramework via<br>
inheriting its DBContext class. Using the DBSet&lt;T&gt; of this context class<br>
(where &lt;T&gt; is an entity definition class) and properly annotated entity<br>
definition class, database CRUD management has been greatly simplified. <strong>In<br>
this course, the entity definition classes will be coded manually by the student<br>
so they can get a better understanding of the components needed by<br>
EnityFramework. Do not reverse engineer the entities. This will be covered in<br>
DMIT2018.</strong></p><p><a href="https://en.wikipedia.org/wiki/Entity_Framework" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Entity_Framework<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p><a href="http://www.entityframeworktutorial.net/what-is-entityframework.aspx" target="_blank" rel="noopener noreferrer">http://www.entityframeworktutorial.net/what-is-entityframework.aspx<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p><strong>EntityFramework in logical Client Server Architecture</strong></p><p>EntityFramework will manage the access of data to and from the database (aqua<br>
color). The DAL layer will contain a class which will be referred to as the<br>
Context class. This class will inherit DbContext from EntityFramework. The<br>
commands to query, add, update and delete records will be coded in the BLL<br>
classes using the DAL Context Class. The mapping of the sql tables will be done<br>
in the Entity classes of the Entity library. These entity classes will be used<br>
by the DAL, BLL and PL layers. These classes are data definitions of the sql<br>
tables.</p><p><img src="/assets/img/65a79bacad56128241e52332894cdcf0.65a79bac.png" alt></p><p><strong>Coding: Create Controller class</strong></p><p>When creating your controller class, you are creating the interface to your<br>
application. When we created the context class, we use an access privilege of<br><strong>internal</strong>. This restricts the access to the context class to <strong>only</strong> other<br>
calls from <strong>within</strong> the same class library. We are using this context class as<br>
access to the database. Logically, therefore, we need “entrance” into the class<br>
library. This interface (entrance) has a public access. Any user wishing to have<br>
access to the database must therefore use the methods within this public<br>
interface. The interface is made up of public methods. Controlling the code we<br>
place in these methods means the application controls what an outside user can<br>
or cannot do.</p><p>Business Logic:</p><p>The controller method can contain complex business rules. These are generally<br>
rules that cannot be covered by simply validation (presence, datatype, range,<br>
etc.). This logic may required multiple database queries. The Alberta Graduated<br>
Driver license is an example. There are several different criteria that must be<br>
meet before one moves to the next level.</p><p>Transaction Processing:</p><p>The workflow to complete a process many require multiple accesses to the<br>
database. This means using a transaction workflow which at any time could be<br>
logically terminated for some reason. Consider a sale. There are several tables<br>
that need to be updated: inventory, sale, and saledetail. Also, if the<br>
transaction is anything but cash, external calls to verify funds need to be<br>
worked into the workflow. Transaction Processing will be covered in DMIT2018.</p><p>Security:</p><p>Security can be done at several levels in your application and the BLL method is<br>
prime place. Since all outside users wanting to access your database need to<br>
travel through a public interface, checking logins and roles can be done here.<br>
Failure to meet proper security clearance means a simple thrown exception.<br>
Security will be covered in DMIT2018.</p><p>When we create the controller, one can place all of the interface into one<br>
physical file and class. This would made maintenance hazardless. Use the same<br>
logical reasons for separating out multiple classes from one physical file and<br>
out of one class to more logical classes that has been in the pass. Each entity<br>
will have their own controller in its own physical file.</p><p><strong>Coding: Setup</strong></p><ol><li><p>Create a folder called NorthwindPages for sample pages</p></li><li><p>Download ProductCRUD startup WebPage and extract files into NorthwindPages.<br>
Refresh folder.</p></li><li><p>Create a web.sitemap with 3 root nodes (Home, Contact and About) and a drop<br>
down menu which will contain the coded samples. Add ProductCRUD to drop down<br>
menu.</p></li><li><p>Open site.master and alter menu to use web.sitemap. You can copy the code<br>
from BasicASPX sitemaster. Rename menu to ClientServerMenu. Change My<br>
Application brand to ASPX Client Server.</p></li><li><p>Run and Test menu. End on ProductCRUD</p></li><li><p>Review contents of form (review of basic aspx controls)</p></li></ol><p><strong>Coding: Create BLL ProductController class</strong></p><ol><li><p>Create a class in the BLL folder of your NorthwindSystem project called<br>
ProductController.</p></li><li><p>Change the access privilege from the default private to public. Any class<br>
without a stated access privilege defaults to private.</p></li><li><p>Add the following namespaces:</p><ol><li><p>using NorthwindEntities;</p></li><li><p>using NorthwindSystem.DAL;</p></li></ol></li></ol><p><strong>Coding: Product_List</strong></p><p>EntityFramework has a couple of queries that need no additional effort from you<br>
in grabbing either all the records from a table or a single record via the<br>
primary key. All work to the database will go through the context class,<br>
therefore, we will need to create an instance of the class. To access the data<br>
of a sql table, one uses the DbSet&lt;T&gt; properties associated with that table.<br>
In this course we will use the simplest techniques in accessing the database.<br>
The return datatype of a query for multiple records is usually IEnumerable. We<br>
will cast this to a List&lt;T&gt; to make things easier for us. The work will be<br>
wrapped in a transaction using <strong>using(){…}</strong>.</p><p>//a method to return all product records from</p><p>//the database to the calling method</p><p>public List&lt;Product&gt; Product_List()</p><p>{</p><p>//need to connect to the Context class</p><p>//this connection will be done in a transaction coding group</p><p>using (var context = new NorthwindContext())</p><p>{</p><p>//via EnityFrame, make a request for all records,</p><p>//all attributes from the specified DbSet property</p><p>return context.Products.ToList();</p><p>}</p><p>}</p><p><strong>Coding: Product_Get(int productid)</strong></p><p>EntityFramework has a method called <strong>Find(datatype)</strong> which can be used to<br>
retrieve a record from the associate sql table via the context DbSet&lt;T&gt;<br>
property.</p><p>public Product Product_Get (int productid)</p><p>{</p><p>//return the record from the database via the DbSet collection</p><p>//where the pkey matches the supplied value</p><p>using (var context = new NorthwindContext())</p><p>{</p><p>return context.Products.Find(productid);</p><p>}</p><p>}</p><p><strong>Coding: Classroom exercise</strong></p><p>Create the SupplierController and CategoryController classes. Add two methods to<br>
each class. One method to return all records of the associated sql table and one<br>
method to return the sql table record for a supplied primary key value.</p><p><strong>Coding: Web page</strong></p><p><strong>Coding: Required Namespaces for the Code-Behind.</strong></p><blockquote><p>#region Additional Namespaces</p></blockquote><blockquote><p>using NorthwindEntities;</p></blockquote><blockquote><p>using NorthwindSystem.BLL;</p></blockquote><blockquote><p>#endregion</p></blockquote><p><strong>Coding: Error Handling GetInnerException(Exception ex)</strong></p><p>Most times when an error is generated, we handle it using Try/Catch. This will<br>
display the error and we can determine the problem with our code and fix it.<br>
However, there will be times when an error is generated and tells you to view<br>
the Inner Exception. This can be annoying. A method has been created for your<br>
use to handle Catch exceptions. This method will take in an Exception datatype<br>
and drill down until it reaches the lowest error then return it as an Exception.<br>
You can then cast to a string and assign the result to your message label on the<br>
form.</p><blockquote><p>try</p></blockquote><p>{</p><p>//place your code here</p><p>}</p><p>catch(Exception ex)</p><p>{</p><p>Message.Text = GetInnerException(ex).ToString();</p><p>}</p><p>//use this method to discover the inner most error message.</p><p>//this routine has been created by the user</p><p>protected Exception GetInnerException(Exception ex)</p><p>{</p><p>//drill down to the inner most exception</p><p>while (ex.InnerException != null)</p><p>{</p><p>ex = ex.InnerException;</p><p>}</p><p>return ex;</p><p>}</p><p><strong>Coding: Fill drop down list</strong></p><p>The concept of placing data into a drop down list should be well understood by<br>
your students by this time. Review the two components: display text (visible)<br>
and value text (hidden and associated). Filling a drop down list control will<br>
require making a call to the appropriate controller class and obtaining the<br>
table collection (data). This collection will be sourced to the control<br>
(.DataSource). The display and value texts will be assigned by entity property<br>
name. Lastly, the data will be bound to the control (.DataBind()). Prompts can<br>
also be added to the drop down list. Although, not necessary, it is handy to<br>
place this code into a method so it can be called from any event handler of the<br>
web page.</p><p>protected void BindProductList()</p><p>{</p><p>//since this method will be making a call off the web page</p><p>//to another class/project it needs to be placed</p><p>//withn user friendly error handling</p><p>try</p><p>{</p><p>//setup a connect to the controller that will provide</p><p>//the need interface for the request</p><p>ProductController sysmgr = new ProductController();</p><p>//obtain the data from the controller</p><p>List&lt;Product&gt; info = sysmgr.Product_List();</p><p>//Sort of the collection</p><p>//optional</p><p>info.Sort((x, y) =&gt; x.ProductName.CompareTo(y.ProductName));</p><p>//attach data to the drop down list</p><p>ProductList.DataSource = info;</p><p>//specify the display attribute and value attribute</p><p>ProductList.DataTextField = &quot;ProductName&quot;;</p><p>ProductList.DataValueField = &quot;ProductID&quot;;</p><p>//bind the data to the control</p><p>ProductList.DataBind();</p><p>//optional prompt line</p><p>ProductList.Items.Insert(0, &quot;select ....&quot;);</p><p>}</p><p>catch (Exception ex)</p><p>{</p><p>Message.Text = GetInnerException(ex).ToString();</p><p>}</p><p>}</p><p><strong>Coding: Classroom exercise</strong></p><p>Create the BindSupplierList() and BindCategoryList() classes. The drop down<br>
controls are SupplierList and CategoryList.</p><p><strong>Coding: Clear Event.</strong></p><p>Implement the Clear event. Double click the clear linkbutton on the Design view.</p><p>protected void Clear_Click(object sender, EventArgs e)</p><p>{</p><p>ProductID.Text = &quot;&quot;;</p><p>ProductName.Text = &quot;&quot;;</p><p>SupplierList.SelectedIndex = 0;</p><p>CategoryList.SelectedIndex = 0;</p><p>QuantityPerUnit.Text = &quot;&quot;;</p><p>UnitPrice.Text = &quot;&quot;;</p><p>UnitsInStock.Text = &quot;&quot;;</p><p>UnitsOnOrder.Text = &quot;&quot;;</p><p>ReorderLevel.Text = &quot;&quot;;</p><p>Discontinued.Checked = false;</p><p>}</p><p><strong>Coding: Search event.</strong></p><p>Implement the Search event. Double click the clear linkbutton on the Design<br>
view.</p><p>protected void Search_Click(object sender, EventArgs e)</p><p>{</p><p>//verify a product was selected for lookup</p><p>if (ProductList.SelectedIndex == 0)</p><p>{</p><p>Message.Text = &quot;Please select a product for the search&quot;;</p><p>}</p><p>else</p><p>{</p><p>try</p><p>{</p><p>//connect to the required controller</p><p>ProductController sysmgr = new ProductController();</p><p>//create a pointer for the data being returned</p><p>Product info = null;</p><p>//make your call</p><p>info = sysmgr.Product_Get(int.Parse(ProductList.SelectedValue));</p><p>//did you actually get data</p><p>if (info == null)</p><p>{</p><p>Message.Text = &quot;Product not found. Make another selection.&quot;;</p><p>BindProductList();</p><p>}</p><p>else</p><p>{</p><p>//load the web controls with the data in my data instance</p><p>ProductID.Text = info.ProductID.ToString();</p><p>ProductName.Text = info.ProductName;</p><p>SupplierList.SelectedValue = info.SuppierID.ToString();</p><p>CategoryList.SelectedValue = info.CategoryID.ToString();</p><p>QuantityPerUnit.Text = info.QuantityPerUnit;</p><p>UnitPrice.Text = info.UnitPrice == null ? &quot;0.00&quot; :<br>
string.Format(&quot;{0:0.00}&quot;, info.UnitPrice);</p><p>UnitsInStock.Text = info.UnitsInStock == null ? &quot;0&quot; :<br>
info.UnitsInStock.ToString();</p><p>UnitsOnOrder.Text = info.UnitsOnOrder == null ? &quot;0&quot; :<br>
info.UnitsOnOrder.ToString();</p><p>ReorderLevel.Text = info.ReorderLevel == null ? &quot;0&quot; :<br>
info.ReorderLevel.ToString();</p><p>Discontinued.Checked = info.Discontinued;</p><p>}</p><p>}</p><p>catch (Exception ex)</p><p>{</p><p>Message.Text = GetInnerException(ex).ToString();</p><p>}</p><p>}</p><p>}</p></div><div class="page-edit"><!----><!----></div><!----></div></div></div>
    <script src="/assets/js/80.91bb7e9e.js" defer></script><script src="/assets/js/app.18ca0063.js" defer></script>
  </body>
</html>
