(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{455:function(e,t,v){"use strict";v.r(t);var r=v(42),_=Object(r.a)({},(function(){var e=this,t=e.$createElement,v=e._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("p",[v("strong",[e._v("Objectives:")])]),e._v(" "),v("p",[v("strong",[e._v("Discuss:")])]),e._v(" "),v("blockquote",[v("p",[e._v("What is “filter” searching?")])]),e._v(" "),v("blockquote",[v("p",[e._v("Why would one wish to use a filter search?")])]),e._v(" "),v("blockquote",[v("p",[e._v("Different filter searching techniques. (Review Basic Search Techniques under\nRazor Forms and Database Queries)")])]),e._v(" "),v("p",[v("strong",[e._v("Code:")])]),e._v(" "),v("blockquote",[v("p",[e._v("BLL: Introduce the use of Views in sql as the data container for\nSqlQuery<T>().")])]),e._v(" "),v("blockquote",[v("p",[e._v("PL: Use different controls to obtain the search filter and display the\nsearch data.")])]),e._v(" "),v("p",[v("strong",[e._v("Resources: Student")])]),e._v(" "),v("p",[e._v("Moodle site.")]),e._v(" "),v("ul",[v("li",[v("p",[e._v("Search Techniques")])]),e._v(" "),v("li",[v("p",[e._v("Display Multiple Items in a GridView (tutorial)")])])]),e._v(" "),v("p",[v("strong",[e._v("Resources: Instructor")])]),e._v(" "),v("p",[e._v("Lesson 1: Review of filter search techniques first shown in Razor.")]),e._v(" "),v("p",[v("strong",[e._v("Concepts:")])]),e._v(" "),v("ol",[v("li",[v("p",[e._v("Filter search Techniques")])]),e._v(" "),v("li",[v("p",[e._v("Why and When to use filter search techniques")])]),e._v(" "),v("li",[v("p",[e._v("Relate to Course Project")])]),e._v(" "),v("li",[v("p",[e._v("Optional Menu and MultiView")])])]),e._v(" "),v("p",[v("strong",[e._v("Class actions:")])]),e._v(" "),v("p",[e._v("Demo the FilterSearches.aspx page.")]),e._v(" "),v("p",[e._v("Menu and MultiView controls.")]),e._v(" "),v("p",[e._v("MultiView")]),e._v(" "),v("p",[e._v('<asp:MultiView ID="MultiView1" runat="server" ActiveViewIndex="0">')]),e._v(" "),v("p",[e._v('<asp:View ID="View1" runat="server">')]),e._v(" "),v("p",[e._v('<fieldset class="form-horizontal">')]),e._v(" "),v("p",[e._v("<legend>Filter Queries: Dropdown List</legend>")]),e._v(" "),v("p",[e._v('<asp:Label ID="Label1" runat="server" Text="Categories:"></asp:Label>')]),e._v(" "),v("p",[e._v('<asp:DropDownList ID="CategoryList" runat="server"')]),e._v(" "),v("p",[e._v('AutoPostBack="True" OnSelectedIndexChanged="CategoryList_SelectedIndexChanged">')]),e._v(" "),v("p",[e._v("</asp:DropDownList>")]),e._v(" "),v("p",[e._v("<br /><br />")]),e._v(" "),v("p",[e._v('<asp:GridView ID="ProductGridViewV1" runat="server">')]),e._v(" "),v("p",[e._v("</asp:GridView>")]),e._v(" "),v("p",[e._v("</fieldset>")]),e._v(" "),v("p",[e._v("</asp:View>")]),e._v(" "),v("p",[e._v('<asp:View ID="View2" runat="server">')]),e._v(" "),v("ul",[v("li",[e._v("Repeat asp:View for each view tab")])]),e._v(" "),v("p",[e._v("</asp:View>")]),e._v(" "),v("p",[e._v("</asp:MultiView>")]),e._v(" "),v("p",[v("strong",[e._v("Notes")])]),e._v(" "),v("p",[e._v('ActiveViewIndex="0" Parameter indicates which view to show on the web page, set\nto the first view (index 0) when the page is first displayed. This parameter can\nbe changed in your code behind to see the other views (see Menu).')]),e._v(" "),v("p",[e._v('<asp:View ID="View1" runat="server"> Starts a view. The view contains whatever\ncontrols you wish to use to create your display')]),e._v(" "),v("p",[e._v('AutoPostBack="True" On the DropDownList means a button is not required. The\nevent is activated if the selected item on the list is changed.')]),e._v(" "),v("p",[e._v("It is important to note that this is ALL one web page. The rules of unique names\non a web page MUST be followed even though similar controls may exist in other\nviews (example the GridView). You cannot reuse the same name. One simple\nsolution is to add a string to the name to make it unique. This page adds Vn to\nthe end of command named controls where n is the view number (1,2, etc) ex:\nProductGridViewV1.")]),e._v(" "),v("p",[v("strong",[e._v("Menu")])]),e._v(" "),v("p",[e._v("The Menu control is used to represent the tabs of the MultiView. The Menu is\nformatted using a custom CSS file. The event is used to switch between Views.")]),e._v(" "),v("p",[v("strong",[e._v("CSS")])]),e._v(" "),v("p",[e._v(".tabs{")]),e._v(" "),v("p",[e._v("position:relative;")]),e._v(" "),v("p",[e._v("top:1px;")]),e._v(" "),v("p",[e._v("left:10px;")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v(".tab{")]),e._v(" "),v("p",[e._v("border:solid 3px black;")]),e._v(" "),v("p",[e._v("background-color:white;")]),e._v(" "),v("p",[e._v("padding: 5px 10px;")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v(".selectedTab {")]),e._v(" "),v("p",[e._v("background-color: white;")]),e._v(" "),v("p",[e._v("border-bottom:solid 3px white;")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v(".tabContents {")]),e._v(" "),v("p",[e._v("border: solid 1px black;")]),e._v(" "),v("p",[e._v("padding: 10px;")]),e._v(" "),v("p",[e._v("background-color: white")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[v("strong",[e._v("Menu control")])]),e._v(" "),v("p",[e._v('<asp:Menu ID="Menu1" runat="server" Orientation="Horizontal"')]),e._v(" "),v("p",[e._v('StaticMenuItemStyle-CssClass="tab"')]),e._v(" "),v("p",[e._v('Font-Size="Large" StaticSelectedStyle-CssClass="selectedTab"')]),e._v(" "),v("p",[e._v('StaticMenuItemStyle-HorizontalPadding="50px"')]),e._v(" "),v("p",[e._v('StaticSelectedStyle-BackColor="lightblue"')]),e._v(" "),v("p",[e._v('CssClass="tabs"')]),e._v(" "),v("p",[e._v('OnMenuItemClick="Menu1_MenuItemClick">')]),e._v(" "),v("p",[e._v("<Items>")]),e._v(" "),v("p",[e._v('<asp:MenuItem Text="DropDownList" Selected="true" Value="0"></asp:MenuItem>')]),e._v(" "),v("p",[e._v('<asp:MenuItem Text="Textbox" Value="1"></asp:MenuItem>')]),e._v(" "),v("p",[e._v('<asp:MenuItem Text="MultiParameter" Value="2"></asp:MenuItem>')]),e._v(" "),v("p",[e._v('<asp:MenuItem Text="DrillDown" Value="3"></asp:MenuItem>')]),e._v(" "),v("p",[e._v('<asp:MenuItem Text="Exercise" Value="4"></asp:MenuItem>')]),e._v(" "),v("p",[e._v("</Items>")]),e._v(" "),v("p",[e._v("</asp:Menu>")]),e._v(" "),v("p",[e._v("The Value parameter will be used by the event to set the ActiveviewIndex.")]),e._v(" "),v("p",[v("strong",[e._v("Menu Event")])]),e._v(" "),v("p",[e._v("protected void Menu1_MenuItemClick(object sender, MenuEventArgs e)")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("int index = Int32.Parse(e.Item.Value);")]),e._v(" "),v("p",[e._v("MultiView1.ActiveViewIndex = index;")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("Demo different types of filters. Search Techniques document. Relate to course\nproject.")]),e._v(" "),v("p",[v("strong",[e._v("Using SQL Views")])]),e._v(" "),v("p",[e._v("There are times when your application may not need the complete entity class\ndefinition or the returned data does not match the entity class definition. Sql\nviews are popular way of exposing data to a user so they are not directly\ntouching the sql table. You can create a class that models the data returned by\na View. This class will NOT have a DbSet() in the context class. It CAN be used\nas the datatype for a <T> collection.")]),e._v(" "),v("p",[e._v("This page has 2 Views:")]),e._v(" "),v("p",[e._v("EmployeeOfTerritory (demo page DrillDown)")]),e._v(" "),v("p",[e._v("//this is not a database table (entity)")]),e._v(" "),v("p",[e._v("//this is a definition of a database view, DO NOT create a DbSet<> for this\nclass")]),e._v(" "),v("p",[e._v("public class EmployeeOfTerritory")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("public string TerritoryID { get; set; }")]),e._v(" "),v("p",[e._v("public int EmployeeID { get; set; }")]),e._v(" "),v("p",[e._v("public string FirstName { get; set; }")]),e._v(" "),v("p",[e._v("public string LastName { get; set; }")]),e._v(" "),v("p",[e._v("public string Address { get; set; }")]),e._v(" "),v("p",[e._v("public string City { get; set; }")]),e._v(" "),v("p",[e._v("public string PostalCode { get; set; }")]),e._v(" "),v("p",[e._v("public string HomePhone { get; set; }")]),e._v(" "),v("p",[e._v("public string Extension { get; set; }")]),e._v(" "),v("p",[e._v("[NotMapped]")]),e._v(" "),v("p",[e._v("public string FullName")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("get")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v('return LastName + ", " + FirstName;')]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("SupplierCategories (Exercise view).")]),e._v(" "),v("p",[e._v("public class SupplierCategories")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("public int CategoryID {get;set;}")]),e._v(" "),v("p",[e._v("public string CategoryName { get; set; }")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[v("strong",[e._v("Exercise View")])]),e._v(" "),v("p",[e._v("This is for the student to do as a class exercise. It is not for marks.")]),e._v(" "),v("p",[e._v("Solution:")]),e._v(" "),v("p",[e._v('<asp:View ID="View5" runat="server">')]),e._v(" "),v("p",[e._v('<fieldset class="form-horizontal">')]),e._v(" "),v("p",[e._v("<legend>Filter Queries: Exercise</legend>")]),e._v(" "),v("p",[e._v('<blockquote style="font-size:x-large">')]),e._v(" "),v("p",[e._v("For this exercise (not for marks) you are to retrieve the products")]),e._v(" "),v("p",[e._v("from a supplier's category and display the product(s) records. You need to")]),e._v(" "),v("p",[e._v("create the necessary controller methods, design your form, and implement")]),e._v(" "),v("p",[e._v("the necessary code-behind. The following resources are available for this"),v("br"),e._v("\nexercise:")]),e._v(" "),v("p",[e._v("<ul>")]),e._v(" "),v("p",[e._v("<li>Sql procedure <strong> Suppliers_GetCategories</strong>: returns the"),v("br"),e._v("\nsupplier's categories</li>")]),e._v(" "),v("p",[e._v("<li>Sql procedure <strong>Products_GetForSupplierCategory</strong>:\nreturns"),v("br"),e._v("\nproducts for a supplier category</li>")]),e._v(" "),v("p",[e._v("<li>Entities and Views: <strong>Product, Supplier, SupplierCategories"),v("br"),e._v("\n</strong></li>")]),e._v(" "),v("p",[e._v("</ul>")]),e._v(" "),v("p",[e._v("</blockquote>")]),e._v(" "),v("p",[e._v('<asp:Label ID="Label7" runat="server" Text="Supplier:"></asp:Label>')]),e._v(" "),v("p",[e._v('<asp:DropDownList ID="SupplierListV5" runat="server"></asp:DropDownList>')]),e._v(" "),v("p",[e._v('<asp:Button ID="FindCategories" runat="server" Text="Categories?"'),v("br"),e._v('\nOnClick="FindCategories_Click" />')]),e._v(" "),v("p",[e._v('<asp:Label ID="label8" runat="server" Text="Categories:"></asp:Label>')]),e._v(" "),v("p",[e._v('<asp:DropDownList ID="CategoryListV5" runat="server"></asp:DropDownList>')]),e._v(" "),v("p",[e._v('<asp:Button ID="FindSupplierCategoryProducts" runat="server" Text="Products?"')]),e._v(" "),v("p",[e._v('OnClick="FindSupplierCategoryProducts_Click" Enabled="false" />')]),e._v(" "),v("p",[e._v('<asp:Button ID="Reset" runat="server" Text="Reset" OnClick="Reset_Click" />')]),e._v(" "),v("p",[e._v("<br />")]),e._v(" "),v("p",[e._v("<br />")]),e._v(" "),v("p",[e._v('<asp:GridView ID="ProductsGridViewV5" runat="server">')]),e._v(" "),v("p",[e._v("</asp:GridView>")]),e._v(" "),v("p",[e._v("</fieldset>")]),e._v(" "),v("p",[e._v("</asp:View>")]),e._v(" "),v("p",[e._v("protected void FindCategories_Click(object sender, EventArgs e)")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("if (SupplierListV5.SelectedIndex == 0)")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v('errormsgs.Add("Select a supplier to obtain their categories.");')]),e._v(" "),v("p",[e._v('LoadMessageDisplay(errormsgs, "alert alert-info");')]),e._v(" "),v("p",[e._v("CategoryListV5.Items.Clear();")]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataSource = null;")]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataBind();")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("else")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("try")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("SupplierController sysmgr = new SupplierController();")]),e._v(" "),v("p",[e._v("List<SupplierCategories> info ="),v("br"),e._v("\nsysmgr.Suppliers_GetCategories(int.Parse(SupplierListV5.SelectedValue));")]),e._v(" "),v("p",[e._v("if (info.Count == 0)")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v('errormsgs.Add("No category data found for the supplier");')]),e._v(" "),v("p",[e._v('LoadMessageDisplay(errormsgs, "alert alert-info");')]),e._v(" "),v("p",[e._v("CategoryListV5.Items.Clear();")]),e._v(" "),v("p",[e._v("CategoryListV5.DataBind();")]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataSource = null;")]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataBind();")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("else")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("info.Sort((x, y) => x.CategoryName.CompareTo(y.CategoryName));")]),e._v(" "),v("blockquote",[v("p",[e._v("//Second Dropdown list drill down")])]),e._v(" "),v("p",[e._v("CategoryListV5.DataSource = info;")]),e._v(" "),v("p",[e._v("CategoryListV5.DataTextField = nameof(SupplierCategories.CategoryName);")]),e._v(" "),v("p",[e._v("CategoryListV5.DataValueField = nameof(SupplierCategories.CategoryID);")]),e._v(" "),v("p",[e._v("CategoryListV5.DataBind();")]),e._v(" "),v("p",[e._v('CategoryListV5.Items.Insert(0, "select....");')]),e._v(" "),v("p",[e._v("//GridView")]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataSource = null;")]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataBind();")]),e._v(" "),v("p",[e._v("SupplierListV5.Enabled = false;")]),e._v(" "),v("p",[e._v("FindSupplierCategoryProducts.Enabled = true;")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("catch (Exception ex)")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("errormsgs.Add(GetInnerException(ex).ToString());")]),e._v(" "),v("p",[e._v('LoadMessageDisplay(errormsgs, "alert alert-danger");')]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("protected void FindSupplierCategoryProducts_Click(object sender, EventArgs e)")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("if (CategoryListV5.SelectedIndex == 0)")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v('errormsgs.Add("Select a category to view the supplier\'s category products.");')]),e._v(" "),v("p",[e._v('LoadMessageDisplay(errormsgs, "alert alert-info");')]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataSource = null;")]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataBind();")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("else")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("try")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("ProductController sysmgr = new ProductController();")]),e._v(" "),v("p",[e._v("List<Product> info = sysmgr.Products_GetForSupplierCategory(")]),e._v(" "),v("p",[e._v("int.Parse(SupplierListV5.SelectedValue),")]),e._v(" "),v("p",[e._v("int.Parse(CategoryListV5.SelectedValue));")]),e._v(" "),v("p",[e._v("if (info.Count == 0)")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v('errormsgs.Add("No data found for the supplier\'s category");')]),e._v(" "),v("p",[e._v('LoadMessageDisplay(errormsgs, "alert alert-info");')]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataSource = null;")]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataBind();")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("else")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("info.Sort((x, y) => x.ProductName.CompareTo(y.ProductName));")]),e._v(" "),v("p",[e._v("//GridView")]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataSource = info;")]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataBind();")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("catch (Exception ex)")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("errormsgs.Add(GetInnerException(ex).ToString());")]),e._v(" "),v("p",[e._v('LoadMessageDisplay(errormsgs, "alert alert-danger");')]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("protected void Reset_Click(object sender, EventArgs e)")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("SupplierListV5.Enabled = true;")]),e._v(" "),v("p",[e._v("CategoryListV5.Items.Clear();")]),e._v(" "),v("p",[e._v("FindSupplierCategoryProducts.Enabled = false;")]),e._v(" "),v("p",[e._v("//GridView")]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataSource = null;")]),e._v(" "),v("p",[e._v("ProductsGridViewV5.DataBind();")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("SupplierController")]),e._v(" "),v("p",[e._v("public List<SupplierCategories> Suppliers_GetCategories(int suppilerid)")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("using (var context = new NorthwindContext())")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("IEnumerable<SupplierCategories> results ="),v("br"),e._v("\ncontext.Database.SqlQuery<SupplierCategories>("),v("br"),e._v('\n"Suppliers_GetCategories @SupplierID",')]),e._v(" "),v("p",[e._v('new SqlParameter("SupplierID", suppilerid));')]),e._v(" "),v("p",[e._v("return results.ToList();")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("ProductController")]),e._v(" "),v("p",[e._v("public List<Product> Products_GetForSupplierCategory(int supplierid, int\ncategoryid)")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("using (var context = new NorthwindContext())")]),e._v(" "),v("p",[e._v("{")]),e._v(" "),v("p",[e._v("IEnumerable<Product> results =")]),e._v(" "),v("p",[e._v("context.Database.SqlQuery<Product>("),v("br"),e._v('\n"Products_GetForSupplierCategory @SupplierID, @CategoryID",')]),e._v(" "),v("p",[e._v('new SqlParameter("SupplierID", supplierid),')]),e._v(" "),v("p",[e._v('new SqlParameter("CategoryID", categoryid));')]),e._v(" "),v("p",[e._v("return results.ToList();")]),e._v(" "),v("p",[e._v("}")]),e._v(" "),v("p",[e._v("}")])])}),[],!1,null,null,null);t.default=_.exports}}]);