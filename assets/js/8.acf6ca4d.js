(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{364:function(e,t,o){e.exports=o.p+"assets/img/e41f7b00c13bfb62f6dec37276dde455.e41f7b00.png"},365:function(e,t,o){e.exports=o.p+"assets/img/a27f8ac20e804e48e9071feebb925dc1.a27f8ac2.png"},366:function(e,t,o){e.exports=o.p+"assets/img/fa45d163ca33085bcf9f4beb60f0dc80.fa45d163.png"},440:function(e,t,o){"use strict";o.r(t);var a=o(42),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[a("strong",[e._v("Objectives:")])]),e._v(" "),a("p",[a("strong",[e._v("Discuss:")])]),e._v(" "),a("blockquote",[a("p",[e._v("CRUD: Update and Delete?")])]),e._v(" "),a("blockquote",[a("p",[e._v("Why lookup first?")])]),e._v(" "),a("blockquote",[a("p",[e._v("Difference between Insert and Update?")])]),e._v(" "),a("blockquote",[a("p",[e._v("Confirmation on Delete.")])]),e._v(" "),a("p",[a("strong",[e._v("Code:")])]),e._v(" "),a("blockquote",[a("p",[e._v("Demonstrate Product Update and Delete.")])]),e._v(" "),a("p",[a("strong",[e._v("Resources: Student")])]),e._v(" "),a("p",[e._v("Moodle site.")]),e._v(" "),a("p",[e._v("URL Student Notes")]),e._v(" "),a("p",[e._v("Starting Kit for Product Update and Delete")]),e._v(" "),a("p",[a("strong",[e._v("Resources: Instructor")])]),e._v(" "),a("p",[e._v("Lesson 4: CRUD Update and Delete.")]),e._v(" "),a("p",[a("strong",[e._v("Concepts:")])]),e._v(" "),a("ol",[a("li",[a("p",[e._v("What is CRUD: Update and Delete")])]),e._v(" "),a("li",[a("p",[e._v("Lookup for current data before actions")])]),e._v(" "),a("li",[a("p",[e._v("Using various techniques for CURD: Delete")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Physical removal of a record")])]),e._v(" "),a("li",[a("p",[e._v("Logical removal of a record")])]),e._v(" "),a("li",[a("p",[e._v("Confirmation of a delete action")])])])]),e._v(" "),a("li",[a("p",[e._v("Review Lookup techniques")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Using a DropDownList (very small collection, pkey and description text)")])]),e._v(" "),a("li",[a("p",[e._v("Using a Textbox (known pkey say of a bill number)")])]),e._v(" "),a("li",[a("p",[e._v("Multiple step lookup (as a search string for a more refined list to\nchose from)")])])])]),e._v(" "),a("li",[a("p",[e._v("Processing page: basic validation for update, no validation for delete")])])]),e._v(" "),a("p",[a("strong",[e._v("Discuss CRUD.")])]),e._v(" "),a("p",[e._v("CRUD stands for Create (insert), Read (queries), Update and Delete. Insert\nplaces a record on the database, update alters a record on a database, and\ndelete physically removes a record from the database. CRUD is usually use when\ndiscussing the maintenance of a single record. When your processing involves\naltering multiple tables, it is usually referred to as an Online Transaction\nProcess (OLTP). OLTP will be covered in the next programming course.")]),e._v(" "),a("p",[e._v("Update is very similar to inserting. The difference is the update includes the\nprimary key processing for identity primary keys. The Primary Key should be\ndisplayed in read-only field and was filled during a lookup.")]),e._v(" "),a("p",[e._v("Stress that testing needs to be done on the success of an apparent update or\ndelete.")]),e._v(" "),a("p",[a("img",{attrs:{src:o(364),alt:""}})]),e._v(" "),a("p",[e._v("Delete can be logically implemented by using a flag. You may not wish to\nphysically remove a record from the database because of foreign key constraints.\nIf you remove the record, you may need to remove other records. This may lead to\na loss of valuable historical information (such as pass sales trends, customer\npurchasing trends, etc). So to indicate that a particular record is not to be\nfurther used in processing a flag is set. Example, a product has become\ndiscontinued. You do not wish to display it anymore to customers. You cannot\nphysically remove the record without removing all other data associated with it\n(foreign key constraints). So, the product record has a logical flag that\nindicates whether to use the record, let’s say the attribute is called\nDiscontinued. If the attribute is false, the product can be shown for sale; if\ntrue, not shown. Once the attribute is true, queries do not return it for\nviewing, therefore, no new sales are generated.")]),e._v(" "),a("p",[e._v("So, how to handle a logical delete. It becomes an update.")]),e._v(" "),a("p",[a("strong",[e._v("Coding: Down Load ProductEdit startup kit")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Down load the ProductEdit starter kit zip file, unzip and move\nProductSearch.cshtml and ProductEdit.cshtml under the DBPages folder of the\nclass demonstration solution.")])]),e._v(" "),a("li",[a("p",[e._v("Open the file containing your website menu (_Menu.cshtml).")])]),e._v(" "),a("li",[a("p",[e._v("Create another a menu item to page called ProductSearch.cshtml in a folder\ncalled DBPages.")])])]),e._v(" "),a("p",[a("strong",[e._v("Coding: ProductSearch.cshtml")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("This page works without any changes.")])]),e._v(" "),a("li",[a("p",[e._v("Partial string lookup: discuss the creation of the partial string variable.\nA great way to prevent sql injection attack when using the .Query() with a\nparameter.")])]),e._v(" "),a("li",[a("p",[e._v("WebGrid in a form. If(IsPost) within a form.")])]),e._v(" "),a("li",[a("p",[e._v("Review passing data from one page to another")])]),e._v(" "),a("li",[a("p",[e._v("Because WebGrid is in a form, javascript is needed to do proper paging (just\nseems to be the way to go to solve paging problem). This is different then a\nWebGrid "),a("em",[e._v("not")]),e._v(" in a form.")])])]),e._v(" "),a("blockquote",[a("p",[e._v("@* Since the webgrid is in the form (method:post), the webgrid's\nmethod:Get used")])]),e._v(" "),a("blockquote",[a("p",[e._v("for paging has a problem.")])]),e._v(" "),a("blockquote",[a("p",[e._v("The following script cause a post to happen on the webgrid's paging even\n*@")])]),e._v(" "),a("blockquote",[a("p",[e._v('<script type="text/javascript">')])]),e._v(" "),a("blockquote",[a("p",[e._v("var links = $('a[href*=page], a[href*=sort]'), form = $('form');")])]),e._v(" "),a("blockquote",[a("p",[e._v("links.click(function () {")])]),e._v(" "),a("blockquote",[a("p",[e._v('form.attr("action", this.href);')])]),e._v(" "),a("blockquote",[a("p",[e._v('$(this).attr("href","javascript:");')])]),e._v(" "),a("blockquote",[a("p",[e._v("form.submit();")])]),e._v(" "),a("blockquote",[a("p",[e._v("});")])]),e._v(" "),a("blockquote",[a("p",[e._v("<\/script>")])]),e._v(" "),a("p",[a("img",{attrs:{src:o(365),alt:""}})]),e._v(" "),a("p",[a("img",{attrs:{src:o(366),alt:""}})]),e._v(" "),a("p",[a("strong",[e._v("Coding: ProductEdit.cshtml")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Two column form labels and controls")])]),e._v(" "),a("li",[a("p",[e._v("Labels aligned right (text-right)")])]),e._v(" "),a("li",[a("p",[e._v("Controls default aligned left.")])]),e._v(" "),a("li",[a("p",[e._v("Put in value attribute but leave blank until processing is coded")])]),e._v(" "),a("li",[a("p",[e._v("Pre-coded pass data retrieval (.QueryString[“label”] (review).")])]),e._v(" "),a("li",[a("p",[e._v("Input control retrieval. Handling of checkbox, converting null (unchecked)\nto 0. Assign incoming ProductID value to local variable for primary lookup.")])]),e._v(" "),a("li",[a("p",[e._v("Lookup of data (Suppliers, Category, and Product record).")])]),e._v(" "),a("li",[a("p",[e._v("Validation in place.")])]),e._v(" "),a("li",[a("p",[e._v("An else of the if(IsPost) loads the current database values for the record\nthat is to be edited or deleted.")])])]),e._v(" "),a("p",[a("strong",[e._v("Coding: Additional Processing to be added")])]),e._v(" "),a("p",[e._v("Add a local variable to catch the value of the submit button.")]),e._v(" "),a("p",[e._v("The processing of this form will replace the HTML paragraph "),a("strong",[e._v("<p>your coding\ngoes here</p>")]),e._v(".")]),e._v(" "),a("p",[e._v("Create a branched If/Else if to process the 3 buttons. Put simply paragraph text\nas process (<p>your xxxx coding goes here</p>) where xxxx is Cancel, Update\nor Delete. Run to ensure this works.")]),e._v(" "),a("p",[e._v('if (formbutton.Equals("cancel"))')]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("<p>your cancel coding goes here</p>")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v('else if (formbutton.Equals("update"))')]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("<p>your update coding goes here</p>")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("else")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("<p>your delete coding goes here</p>")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[a("strong",[e._v("Cancel Event")]),e._v(".")]),e._v(" "),a("p",[e._v("Replace the temporary html paragraph the following code.")]),e._v(" "),a("p",[e._v("//a)could redirect to search page")]),e._v(" "),a("p",[e._v("//b)reset data to the current record for productid")]),e._v(" "),a("p",[e._v("//c)empty the data fields.")]),e._v(" "),a("p",[e._v("//for b and c you should also supply a message to the user")]),e._v(" "),a("p",[e._v('productid = "";')]),e._v(" "),a("p",[e._v('productname = "";')]),e._v(" "),a("p",[e._v('supplierid = "0";')]),e._v(" "),a("p",[e._v('categoryid = "0";')]),e._v(" "),a("p",[e._v('quantityperunit = "";')]),e._v(" "),a("p",[e._v('unitprice = "";')]),e._v(" "),a("p",[e._v('unitsinstock = "";')]),e._v(" "),a("p",[e._v('unitsonorder ="";')]),e._v(" "),a("p",[e._v('reorderlevel = "";')]),e._v(" "),a("p",[e._v('discontinued = "0";')]),e._v(" "),a("p",[e._v('<p><span style="color:blue">')]),e._v(" "),a("p",[e._v("User has cancel the action. Return to search for another product</span>")]),e._v(" "),a("p",[e._v('<a href="~/DBPages/ProductSearch.cshtml">go to search...</a></p>')]),e._v(" "),a("p",[a("strong",[e._v("Update Event")]),e._v(".")]),e._v(" "),a("p",[e._v("The primary key will already be loaded in a read-only input control when the\nform first comes up (as will the other record data). Since the user should not\nbe able to change this in normal usage there should be no concern. However, it\nis those individuals who attempt to disrupt your site for which you need to be\non alert. As such, it is always good practice to ensure this value still exists\nbefore attempting any other processing. So, check to see if the primary key\nexists. If not produce a message and stop the processing.")]),e._v(" "),a("p",[e._v("If you do have the pkey value, then execute your server side validation.")]),e._v(" "),a("p",[e._v("If the validation is successful, you can update your record. Create the update\nsql command (very similar to the insert command). Execute the command this time\ncapturing the integer result of the .Execute(). This value indicates how many\nrecords were affected. This value should be one (with an update that is not\nbased on the pkey, say a general 10% increase in unit price, the value could be\n>1). It however, could be zero. Why? Well, between the time the user first\nlooked up the record and their actual update, the record could have been removed\nfrom the data base. Assume, the user looked up the record, was interrupted by a\nphone call (30 minutes), and then did the update. What happened in that 30\nminutes? Remember this is a multiple user on-line website. So, if the affected\nvalued is > 0, a record was changed successfully. If the affected value is zero\n(0), no record was changed but, also, no exception was encountered. Appropriate\nmessages should be created in both cases. Of course, the hold update is encase\nin a Try/Catch.")]),e._v(" "),a("p",[e._v("//check is there a productid to update")]),e._v(" "),a("p",[e._v("//if not message to use to get new product")]),e._v(" "),a("p",[e._v("//if present")]),e._v(" "),a("p",[e._v("// cause validations")]),e._v(" "),a("p",[e._v("// if valid")]),e._v(" "),a("p",[e._v("// create update command")]),e._v(" "),a("p",[e._v("// execute")]),e._v(" "),a("p",[e._v("// message")]),e._v(" "),a("p",[e._v("// wrap in try/catch")]),e._v(" "),a("p",[e._v("if (string.IsNullOrEmpty(productid))")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v('<p><span style="color:blue">')]),e._v(" "),a("p",[e._v("No product selected. Return to search for another product")]),e._v(" "),a("p",[e._v("</span>")]),e._v(" "),a("p",[e._v('<a href="~/DBPages/ProductSearch.cshtml">go to search...</a>')]),e._v(" "),a("p",[e._v("</p>")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("else")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("if (Validation.IsValid())")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("try")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v('var updatecommmand = "UPDATE Products SET "')]),e._v(" "),a("p",[e._v('+ "ProductName = @0, "')]),e._v(" "),a("p",[e._v('+ "SupplierID = @1, "')]),e._v(" "),a("p",[e._v('+ "CategoryID = @2, "')]),e._v(" "),a("p",[e._v('+ "QuantityPerUnit = @3, "')]),e._v(" "),a("p",[e._v('+ "UnitPrice = @4, "')]),e._v(" "),a("p",[e._v('+ "UnitsInStock = @5, "')]),e._v(" "),a("p",[e._v('+ "UnitsOnOrder = @6, "')]),e._v(" "),a("p",[e._v('+ "ReorderLevel = @7, "')]),e._v(" "),a("p",[e._v('+ "Discontinued = @8 "')]),e._v(" "),a("p",[e._v('+ "WHERE ProductID = @9";')]),e._v(" "),a("p",[e._v("//the placeholders expect a value not to be confused")]),e._v(" "),a("p",[e._v("// with a character string")]),e._v(" "),a("p",[e._v('//the null (as a value) is NOT equal to "null" which is a string')]),e._v(" "),a("p",[e._v("int results = db.Execute(updatecommmand, productname,")]),e._v(" "),a("p",[e._v('supplierid == "0" ? null : supplierid,')]),e._v(" "),a("p",[e._v('categoryid == "0" ? null : categoryid,')]),e._v(" "),a("p",[e._v("string.IsNullOrEmpty(quantityperunit) ? null : quantityperunit,")]),e._v(" "),a("p",[e._v("string.IsNullOrEmpty(unitprice) ? null : unitprice,")]),e._v(" "),a("p",[e._v("string.IsNullOrEmpty(unitsinstock) ? null : unitsinstock,")]),e._v(" "),a("p",[e._v("string.IsNullOrEmpty(unitsonorder) ? null : unitsonorder,")]),e._v(" "),a("p",[e._v("string.IsNullOrEmpty(reorderlevel) ? null : reorderlevel,")]),e._v(" "),a("p",[e._v("discontinued, productid);")]),e._v(" "),a("p",[e._v("if (results > 0)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v('<p><span style="color:green">Product updated. </span></p>')]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("else")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v('<p><span style="color:blue">')]),e._v(" "),a("p",[e._v("Update failed. No product called @productname with an id of @productid"),a("br"),e._v("\non file. </span>")]),e._v(" "),a("p",[e._v("</p>")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("catch (Exception ex)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v('<p><span style="color:blue">Deleted failed. Error\n@ex.Message</span></p>')]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[a("strong",[e._v("Delete Event")]),e._v(".")]),e._v(" "),a("p",[e._v("The primary key will already be loaded in a read-only input control when the\nform first comes up (as will the other record data). Since the user should not\nbe able to change this in normal usage there should be no concern. However, it\nis those individuals who attempt to disrupt your site for which you need to be\non alert. As such, it is always good practice to ensure this value still exists\nbefore attempting any other processing. So, check to see if the primary key\nexists. If not produce a message and stop the processing.")]),e._v(" "),a("p",[e._v("Unlike, the update, no Validation is necessary.")]),e._v(" "),a("p",[e._v("In a Try/Catch, create you sql Delete command, execute (.Execute()), capture the\nrows affected. Now, for the same reasons as in update, check the rows affected\nand produce the appropriate message. To ensure the user does not attempt to\ndelete the same record twice, it is best to empty the pkey input control. This\nwill cause the user to do another lookup and the removed record will not be\navailable. Optionally you could clear out all the input controls.")]),e._v(" "),a("p",[e._v("//check is there a productid to delete")]),e._v(" "),a("p",[e._v("//if not message to use to get new product")]),e._v(" "),a("p",[e._v("//if present")]),e._v(" "),a("p",[e._v("// create delete command")]),e._v(" "),a("p",[e._v("// execute")]),e._v(" "),a("p",[e._v("// message")]),e._v(" "),a("p",[e._v("// wrap in try/catch")]),e._v(" "),a("p",[e._v("if (string.IsNullOrEmpty(productid))")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("<p>")]),e._v(" "),a("p",[e._v('<span style="color:blue">')]),e._v(" "),a("p",[e._v("No product selected. Return to search for another product")]),e._v(" "),a("p",[e._v("</span>")]),e._v(" "),a("p",[e._v('<a href="~/DBPages/ProductSearch.cshtml">go to search...</a>')]),e._v(" "),a("p",[e._v("</p>")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("else")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("try")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v('var deletecommmand = "DELETE Products WHERE ProductID = @0";')]),e._v(" "),a("p",[e._v("int results = db.Execute(deletecommmand, productid);")]),e._v(" "),a("p",[e._v("if (results > 0)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("<p>")]),e._v(" "),a("p",[e._v('<span style="color:green">')]),e._v(" "),a("p",[e._v("Product deleted.")]),e._v(" "),a("p",[e._v("</span>")]),e._v(" "),a("p",[e._v("</p>")]),e._v(" "),a("p",[e._v('productid = "";')]),e._v(" "),a("p",[e._v("//optionally clear the fields.")]),e._v(" "),a("p",[e._v('//productname = "";')]),e._v(" "),a("p",[e._v('//supplierid = "0";')]),e._v(" "),a("p",[e._v('//categoryid = "0";')]),e._v(" "),a("p",[e._v('//quantityperunit = "";')]),e._v(" "),a("p",[e._v('//unitprice = "";')]),e._v(" "),a("p",[e._v('//unitsinstock = "";')]),e._v(" "),a("p",[e._v('//unitsonorder = "";')]),e._v(" "),a("p",[e._v('//reorderlevel = "";')]),e._v(" "),a("p",[e._v('//discontinued = "0";')]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("else")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("<p>")]),e._v(" "),a("p",[e._v('<span style="color:blue">')]),e._v(" "),a("p",[e._v("Delete failed. No product called @productname with an id of"),a("br"),e._v("\n@productid on file.")]),e._v(" "),a("p",[e._v("</span>")]),e._v(" "),a("p",[e._v("</p>")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("catch (Exception ex)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("<p>")]),e._v(" "),a("p",[e._v('<span style="color:blue">')]),e._v(" "),a("p",[e._v("Deleted failed. Error @ex.Message")]),e._v(" "),a("p",[e._v("</span>")]),e._v(" "),a("p",[e._v("</p>")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("Now you may have noticed that you did not have a chance to confirm to cancel\nyour delete. Ouch!!")]),e._v(" "),a("p",[e._v("A little javascript can help here. NOTE: the id attribute on the submit button\nmust be "),a("strong",[e._v("unique.")]),e._v(" It will be used by the javascript .getElementById(…).")]),e._v(" "),a("p",[e._v('<div class="row">')]),e._v(" "),a("p",[e._v('<button type="submit" name="theButton" id="theUpdate" class="btn btn-primary"'),a("br"),e._v('\nvalue="update">Update</button>&nbsp;  ')]),e._v(" "),a("p",[e._v('<button type="submit" name="theButton" id="theDelete" class="btn"\nvalue="delete">'),a("br"),e._v("\nDelete</button>&nbsp;  ")]),e._v(" "),a("p",[e._v('<button type="submit" name="theButton" id="theCancel" class="btn"\nvalue="cancel">'),a("br"),e._v("\nCancel</button>")]),e._v(" "),a("p",[e._v("</div>")]),e._v(" "),a("p",[e._v("@* this javascript will allow for a confirmation dialog to appear")]),e._v(" "),a("p",[e._v("when a particular button is pressed (theDelete) *@")]),e._v(" "),a("p",[e._v('<script type="text/javascript">')]),e._v(" "),a("p",[e._v('document.getElementById("theDelete").onclick = ConfirmDelete;')]),e._v(" "),a("p",[e._v("function ConfirmDelete() {")]),e._v(" "),a("p",[e._v('return confirm("Are you sure you want to remove @productname");')]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("<\/script>")]),e._v(" "),a("p",[e._v("</form>")]),e._v(" "),a("p",[e._v("Another problem that could appear, depending on your coding, is that the client\nside validation happens for the Cancel and Delete. To override this problem add\nanother attribute to the submit buttons: formnovalidate.")]),e._v(" "),a("p",[e._v('<button type="submit" name="theButton" id="theDelete" class="btn"\nvalue="delete"'),a("br"),e._v("\nformnovalidate>Delete</button>&nbsp;  ")]),e._v(" "),a("p",[e._v("The last concern is whether to actually physically remove the record or do a\nlogical remove. A logical removal is done by setting a record attribute which\nacts a flag to its appropriate value. In the case of the Product record, a\nphysical removal may not be the best choice. Instead, in the delete code, do an\nupdate that alters the Discontinued attribute.")]),e._v(" "),a("p",[e._v("if (string.IsNullOrEmpty(productid))")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("<p>")]),e._v(" "),a("p",[e._v('<span style="color:blue">')]),e._v(" "),a("p",[e._v("No product selected. Return to search for another product")]),e._v(" "),a("p",[e._v("</span>")]),e._v(" "),a("p",[e._v('<a href="~/DBPages/ProductSearch.cshtml">go to search...</a>')]),e._v(" "),a("p",[e._v("</p>")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("else")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("try")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v('var deletecommmand = "Update Products "')]),e._v(" "),a("ul",[a("li",[e._v('"SET Discontinued = 1 "')]),e._v(" "),a("li",[e._v('"WHERE ProductID = @0";')])]),e._v(" "),a("p",[e._v("int results = db.Execute(deletecommmand, productid);")]),e._v(" "),a("p",[e._v("if (results > 0)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("<p>")]),e._v(" "),a("p",[e._v('<span style="color:green">')]),e._v(" "),a("p",[e._v("Product discontinued.")]),e._v(" "),a("p",[e._v("</span>")]),e._v(" "),a("p",[e._v("</p>")]),e._v(" "),a("p",[e._v('productid = "";')]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("else")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("<p>")]),e._v(" "),a("p",[e._v('<span style="color:blue">')]),e._v(" "),a("p",[e._v("Discontinued failed. No product called @productname with an"),a("br"),e._v("\nid of @productid on file.")]),e._v(" "),a("p",[e._v("</span>")]),e._v(" "),a("p",[e._v("</p>")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("catch (Exception ex)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("<p>")]),e._v(" "),a("p",[e._v('<span style="color:blue">')]),e._v(" "),a("p",[e._v("Discontinued failed. Error @ex.Message")]),e._v(" "),a("p",[e._v("</span>")]),e._v(" "),a("p",[e._v("</p>")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("}")])])}),[],!1,null,null,null);t.default=r.exports}}]);