(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{431:function(e,t,a){"use strict";a.r(t);var r=a(42),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[a("strong",[e._v("Coding: Update WebPage general error handling")]),e._v(":")]),e._v(" "),a("p",[e._v("Update the way we can handle and display error messages. This will enable your\nwebpage to nicely handle various types of errors whether they are generated from\nyour code, entity annotations for EntityFramework or system errors. The key to\nthis is each error is treated as a single string. Each error is loaded to a\nglobal List<string>. The list is then passed to a display method along with\nthe appropriate bootstrap css alert.")]),e._v(" "),a("p",[a("strong",[e._v("Coding: Update current WebPage: Form")])]),e._v(" "),a("p",[e._v("Replace:")]),e._v(" "),a("p",[e._v('<asp:Label ID="Message" runat="server" ></asp:Label>')]),e._v(" "),a("p",[e._v("With:")]),e._v(" "),a("p",[e._v('<asp:DataList ID="Message" runat="server">')]),e._v(" "),a("p",[e._v("<ItemTemplate>")]),e._v(" "),a("p",[e._v("<%# Container.DataItem %>")]),e._v(" "),a("p",[e._v("</ItemTemplate>")]),e._v(" "),a("p",[e._v("</asp:DataList>")]),e._v(" "),a("p",[a("strong",[e._v("Coding: Update current WebPage: Code-Behind")])]),e._v(" "),a("p",[e._v("Add: List<string> and replace clearing of Message control")]),e._v(" "),a("p",[e._v("List<string> errormsgs = new List<string>();")]),e._v(" "),a("p",[e._v("protected void Page_Load(object sender, EventArgs e)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("Message.DataSource = null;")]),e._v(" "),a("p",[e._v("Message.DataBind();")]),e._v(" "),a("p",[e._v("if (!Page.IsPostBack)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("BindProductList();")]),e._v(" "),a("p",[e._v("BindSupplierList();")]),e._v(" "),a("p",[e._v("BindCategoryList();")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("Replace: All")]),e._v(" "),a("p",[e._v("catch (Exception ex)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("Message.Text = GetInnerException(ex).Message.ToString();")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("With:")]),e._v(" "),a("p",[e._v("catch (Exception ex)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("errormsgs.Add(GetInnerException(ex).ToString());")]),e._v(" "),a("p",[e._v('LoadMessageDisplay(errormsgs, "alert alert-danger");')]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("Replace: All user type messages")]),e._v(" "),a("p",[e._v('Message.Text = "Please select a product for the search";')]),e._v(" "),a("p",[e._v("With:")]),e._v(" "),a("p",[e._v('errormsgs.Add("Please select a product for the search");')]),e._v(" "),a("p",[e._v('LoadMessageDisplay(errormsgs, "alert alert-warning");')]),e._v(" "),a("p",[a("strong",[e._v("Coding: ADD WebPage general method for displaying errors")]),e._v(":")]),e._v(" "),a("p",[e._v("//use this method to load a DataList with a variable")]),e._v(" "),a("p",[e._v("//number of message lines.")]),e._v(" "),a("p",[e._v("//each line is a string")]),e._v(" "),a("p",[e._v("//the strings (lines) are passed to this routine in")]),e._v(" "),a("p",[e._v("// a List<string>")]),e._v(" "),a("p",[e._v("//second parameter is the bootstrap cssclass")]),e._v(" "),a("p",[e._v("protected void LoadMessageDisplay(List<string> errormsglist, string cssclass)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("Message.CssClass = cssclass;")]),e._v(" "),a("p",[e._v("Message.DataSource = errormsglist;")]),e._v(" "),a("p",[e._v("Message.DataBind();")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[a("strong",[e._v("Coding: Different Exception Catches")])]),e._v(" "),a("p",[e._v("Controller EntityFramework execution catch:")]),e._v(" "),a("p",[e._v("Namespaces:")]),e._v(" "),a("p",[e._v("using System.Data.Entity.Infrastructure;")]),e._v(" "),a("p",[e._v("using System.Data.Entity.Core;")]),e._v(" "),a("p",[e._v("catch (DbUpdateException ex)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("UpdateException updateException = (UpdateException)ex.InnerException;")]),e._v(" "),a("p",[e._v("if (updateException.InnerException != null)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("errormsgs.Add(updateException.InnerException.Message.ToString());")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("else")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("errormsgs.Add(updateException.Message);")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v('LoadMessageDisplay(errormsgs, "alert alert-danger");')]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("Controller EntityFramework entity Validation catch:")]),e._v(" "),a("p",[e._v("Namespace:")]),e._v(" "),a("p",[e._v("using System.Data.Entity.Validation;")]),e._v(" "),a("p",[e._v("catch (DbEntityValidationException ex)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("foreach (var entityValidationErrors in ex.EntityValidationErrors)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v("foreach (var validationError in entityValidationErrors.ValidationErrors)")]),e._v(" "),a("p",[e._v("{")]),e._v(" "),a("p",[e._v('errormsgs.Add("Error: " + validationError.ErrorMessage);')]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v("}")]),e._v(" "),a("p",[e._v('LoadMessageDisplay(errormsgs, "alert alert-danger");')]),e._v(" "),a("p",[e._v("}")])])}),[],!1,null,null,null);t.default=s.exports}}]);